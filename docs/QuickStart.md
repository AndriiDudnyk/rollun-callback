# WebHook QuickStart 

## Введение

Приложение имеет 4 роута 

1) `/api` - для обработки ajax запросов
2) `/webhook` - для обработки interruptor или нотификаций
3) `/` - для выдачи пользователю html отображения

В данном примере мы рассмотрим **WebHook**
WebHook - роут который преднозначен для обработки разного рода нотофикаций, а так же обработки interrupt.

## Настройка окружения.

> Запускать все команды нужно в корневой дериктории проекта, если инного не указано в инструкции.

В данном туториале мы рассмотрим два примера:

1) Получение нотификации от крона([cron]()) и ее обработка.

2) Обработка прищедшего interrupt запроса.

И так, для начала что бы мы могли запустить наши примеры вы должны в консоле выполнить

1) `composer update` - что бы установить/обновить все зависимости.

2) `composer lib uninstall` - что бы удалить ранее сгенерированые конфиги и предустановки если такие существуют.

3) `composer lib install` - что бы установить и сконфигурировать наше приложение.

Когда установщик предоставит вам выбор компонентов, нужно выбрать три компонента  

* rollun\logger\Installer  
* rollun\callback\Middleware\MiddlewareInterruptorInstaller  
* rollun\callback\CronInstaller  

4) Удостовертесь что созданы следующее конфиг файлы.

* `rollun.actionrender.ActionRender.dist.local.php`
* `rollun.actionrender.BasicRender.dist.local.php`
* `rollun.actionrender.LazyLoadPipe.dist.local.php`
* `rollun.actionrender.MiddlewarePipe.dist.local.php`
* `rollun.callback.Cron.dist.local.php`
* `rollun.callback.MiddlewareInterruptor.dist.local.php`
* `rollun.logger..dist.local.php`
* `rollun.promise.Entity.dist.local.php`
* `rollun.promise.Promise.dist.local.php`


5)

### Запуск php built-in сервера 
Теперь вам нужно запустить приложение на сервере, для этого вам достаточно запустить в консоле

`composer server` 

6) 

### Запуск тестов

Теперь нужно выполнить последний пункт - проверку что все установленно коректно.
Для этого запустите тесты, сделать это можно выполнив команду из консоли.

`composer run_test`

Если тесты проши успешно - приложение сконфигурировано правильно. В ином случае попробуйте провести всю процедуру заново.

## WebHook - Cron
 
Давайте рассмотрим системную утилиту `cron` в качестве отправителя нотификации. 
В данном случае он буедт оповещать приложение что прошла минута. 
Оповещение будет приходить в качестве **http get** запрос на *path* `\webhook\cron`. 
По своей сути запрорс не трубет ответа, так как являеться лишь средсвом оповещения.
Соответсвенно наше приложение должно на это как то реагировтаь и что то выполнять. 

